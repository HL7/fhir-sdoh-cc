@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://hl7.maxmd.org/fhir/us/maxmd/Questionnaire/17d3c570-28de-4aa3-a135-e35d0932a4ec> a fhir:Questionnaire;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "17d3c570-28de-4aa3-a135-e35d0932a4ec"];
  fhir:Resource.meta [
     fhir:Meta.versionId [ fhir:value "1" ];
     fhir:Meta.lastUpdated [ fhir:value "2020-03-17T13:16:18.108+00:00"^^xsd:dateTime ];
     fhir:Meta.source [ fhir:value "#xd09g68tcUyhlqGZ" ];
     fhir:Meta.profile [
       fhir:value "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire|2.7";
       fhir:index 0;
       fhir:link <http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire|2.7>
     ]
  ];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative with Details</b></p><p><b>id</b>: 17d3c570-28de-4aa3-a135-e35d0932a4ec</p><p><b>meta</b>: </p><p><b>url</b>: <b>http://hl7.maxmd.org/fhir/us/maxmd/Questionnaire/17d3c570-28de-4aa3-a135-e35d0932a4ec</b></p><p><b>identifier</b>: local-ehr-65d310b8-6235-4f47-8d45</p><p><b>version</b>: 0.0.3</p><p><b>name</b>: Food Insecurity (Hunger Vital Sign)</p><p><b>title</b>: Food Insecurity</p><p><b>status</b>: ACTIVE</p><p><b>subjectType</b>: Patient</p><p><b>date</b>: Dec 3, 2019 4:09:54 PM</p><p><b>effectivePeriod</b>: Dec 12, 2019 4:52:01 PM --&gt; Dec 22, 2019 11:49:14 PM</p><blockquote><p><b>item</b></p><p><b>linkId</b>: /88122-7</p><p><b>code</b>: Within the past 12Mo we worried whether our food would run out before we got money to buy more (Details: [not stated] code 88122-7 = '88122-7', stated as 'Within the past 12Mo we worried whether our food would run out before we got money to buy more')</p><p><b>text</b>: Within the past 12Mo we worried whether our food would run out before we got money to buy more</p><p><b>type</b>: CHOICE</p><p><b>required</b>: false</p><blockquote><p><b>answerOption</b></p><p><b>value</b>: Often true (Details: [not stated] code LA28397-0 = 'LA28397-0', stated as 'Often true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Sometimes true (Details: [not stated] code LA6729-3 = 'LA6729-3', stated as 'Sometimes true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Never true (Details: [not stated] code LA28398-8 = 'LA28398-8', stated as 'Never true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Don't know/refused (Details: [not stated] code LA15775-2 = 'LA15775-2', stated as 'Don't know/refused')</p></blockquote></blockquote><blockquote><p><b>item</b></p><p><b>linkId</b>: /88123-5</p><p><b>code</b>: Within the past 12Mo the food we bought just didn't last and we didn't have money to get more (Details: [not stated] code 88123-5 = '88123-5', stated as 'Within the past 12Mo the food we bought just didn't last and we didn't have money to get more')</p><p><b>text</b>: Within the past 12Mo the food we bought just didn't last and we didn't have money to get more</p><p><b>type</b>: CHOICE</p><p><b>required</b>: false</p><blockquote><p><b>answerOption</b></p><p><b>value</b>: Often true (Details: [not stated] code LA28397-0 = 'LA28397-0', stated as 'Often true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Sometimes true (Details: [not stated] code LA6729-3 = 'LA6729-3', stated as 'Sometimes true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Never true (Details: [not stated] code LA28398-8 = 'LA28398-8', stated as 'Never true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Don't know/refused (Details: [not stated] code LA15775-2 = 'LA15775-2', stated as 'Don't know/refused')</p></blockquote></blockquote><blockquote><p><b>item</b></p></blockquote><p><b style=\"color: maroon\">Exception generating Narrative: unknown extension http://hl7.org/fhir/StructureDefinition/questionnaire-observationLinkPeriod</b></p></div>"
  ];
  fhir:DomainResource.extension [
     fhir:index 0;
     fhir:Extension.url [ fhir:value "http://hl7.org/fhir/us/sdc/StructureDefinition/sdc-questionnaire-endpoint" ];
     fhir:Extension.valueString [ fhir:value "https://ehr-sandbox.directmdemail.com:8443/fhir/baseR4" ]
  ], [
     fhir:index 1;
     fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
     fhir:Extension.valueExpression [
       fhir:Expression.name [ fhir:value "worriedAnsCode" ];
       fhir:Expression.language [ fhir:value "text/fhirpath" ];
       fhir:Expression.expression [ fhir:value "%resource.item.where(linkId='/88122-7').answer.value.code" ]
     ]
  ], [
     fhir:index 2;
     fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
     fhir:Extension.valueExpression [
       fhir:Expression.name [ fhir:value "ranOutAnsCode" ];
       fhir:Expression.language [ fhir:value "text/fhirpath" ];
       fhir:Expression.expression [ fhir:value "%resource.item.where(linkId='/88123-5').answer.value.code" ]
     ]
  ], [
     fhir:index 3;
     fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
     fhir:Extension.valueExpression [
       fhir:Expression.name [ fhir:value "riskCodes" ];
       fhir:Expression.language [ fhir:value "text/fhirpath" ];
       fhir:Expression.expression [ fhir:value "'LA28397-0'.combine('LA6729-3')" ]
     ]
  ], [
     fhir:index 4;
     fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
     fhir:Extension.valueExpression [
       fhir:Expression.name [ fhir:value "riskStatus" ];
       fhir:Expression.language [ fhir:value "text/fhirpath" ];
       fhir:Expression.expression [ fhir:value "%riskCodes contains %worriedAnsCode or %riskCodes contains %ranOutAnsCode" ]
     ]
  ], [
     fhir:index 5;
     fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
     fhir:Extension.valueExpression [
       fhir:Expression.name [ fhir:value "answeredEitherQ" ];
       fhir:Expression.language [ fhir:value "text/fhirpath" ];
       fhir:Expression.expression [ fhir:value "%worriedAnsCode.exists() or %ranOutAnsCode.exists()" ]
     ]
  ];
  fhir:Questionnaire.url [ fhir:value "http://hl7.maxmd.org/fhir/us/maxmd/Questionnaire/17d3c570-28de-4aa3-a135-e35d0932a4ec"];
  fhir:Questionnaire.identifier [
     fhir:index 0;
     fhir:Identifier.system [ fhir:value "http://www.maxmddirect.com/hl7/fhir/grv-locali-screenings" ];
     fhir:Identifier.value [ fhir:value "local-ehr-65d310b8-6235-4f47-8d45" ]
  ];
  fhir:Questionnaire.version [ fhir:value "0.0.3"];
  fhir:Questionnaire.name [ fhir:value "Food Insecurity (Hunger Vital Sign)"];
  fhir:Questionnaire.title [ fhir:value "Food Insecurity"];
  fhir:Questionnaire.status [ fhir:value "active"];
  fhir:Questionnaire.subjectType [
     fhir:value "Patient";
     fhir:index 0
  ];
  fhir:Questionnaire.date [ fhir:value "2019-12-03T16:09:54+00:00"^^xsd:dateTime];
  fhir:Questionnaire.effectivePeriod [
     fhir:Period.start [ fhir:value "2019-12-12T16:52:01+00:00"^^xsd:dateTime ];
     fhir:Period.end [ fhir:value "2019-12-22T23:49:14+00:00"^^xsd:dateTime ]
  ];
  fhir:Questionnaire.item [
     fhir:index 0;
     fhir:Element.extension [
       fhir:index 0;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl" ];
       fhir:Extension.valueCodeableConcept [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://hl7.org/fhir/questionnaire-item-control" ];
           fhir:Coding.code [ fhir:value "drop-down" ];
           fhir:Coding.display [ fhir:value "Drop down" ]
         ];
         fhir:CodeableConcept.text [ fhir:value "Drop down" ]
       ]
     ];
     fhir:Questionnaire.item.linkId [ fhir:value "/88122-7" ];
     fhir:Questionnaire.item.code [
       fhir:index 0;
       fhir:Coding.code [ fhir:value "88122-7" ];
       fhir:Coding.display [ fhir:value "Within the past 12Mo we worried whether our food would run out before we got money to buy more" ]
     ];
     fhir:Questionnaire.item.text [ fhir:value "Within the past 12Mo we worried whether our food would run out before we got money to buy more" ];
     fhir:Questionnaire.item.type [ fhir:value "choice" ];
     fhir:Questionnaire.item.required [ fhir:value "false"^^xsd:boolean ];
     fhir:Questionnaire.item.answerOption [
       fhir:index 0;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA28397-0" ];
         fhir:Coding.display [ fhir:value "Often true" ]
       ]
     ], [
       fhir:index 1;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA6729-3" ];
         fhir:Coding.display [ fhir:value "Sometimes true" ]
       ]
     ], [
       fhir:index 2;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA28398-8" ];
         fhir:Coding.display [ fhir:value "Never true" ]
       ]
     ], [
       fhir:index 3;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA15775-2" ];
         fhir:Coding.display [ fhir:value "Don't know/refused" ]
       ]
     ]
  ], [
     fhir:index 1;
     fhir:Element.extension [
       fhir:index 0;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl" ];
       fhir:Extension.valueCodeableConcept [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://hl7.org/fhir/questionnaire-item-control" ];
           fhir:Coding.code [ fhir:value "drop-down" ];
           fhir:Coding.display [ fhir:value "Drop down" ]
         ];
         fhir:CodeableConcept.text [ fhir:value "Drop down" ]
       ]
     ];
     fhir:Questionnaire.item.linkId [ fhir:value "/88123-5" ];
     fhir:Questionnaire.item.code [
       fhir:index 0;
       fhir:Coding.code [ fhir:value "88123-5" ];
       fhir:Coding.display [ fhir:value "Within the past 12Mo the food we bought just didn't last and we didn't have money to get more" ]
     ];
     fhir:Questionnaire.item.text [ fhir:value "Within the past 12Mo the food we bought just didn't last and we didn't have money to get more" ];
     fhir:Questionnaire.item.type [ fhir:value "choice" ];
     fhir:Questionnaire.item.required [ fhir:value "false"^^xsd:boolean ];
     fhir:Questionnaire.item.answerOption [
       fhir:index 0;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA28397-0" ];
         fhir:Coding.display [ fhir:value "Often true" ]
       ]
     ], [
       fhir:index 1;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA6729-3" ];
         fhir:Coding.display [ fhir:value "Sometimes true" ]
       ]
     ], [
       fhir:index 2;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA28398-8" ];
         fhir:Coding.display [ fhir:value "Never true" ]
       ]
     ], [
       fhir:index 3;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA15775-2" ];
         fhir:Coding.display [ fhir:value "Don't know/refused" ]
       ]
     ]
  ], [
     fhir:index 2;
     fhir:Element.extension [
       fhir:index 0;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/questionnaire-observationLinkPeriod" ];
       fhir:Extension.valueBoolean [ fhir:value "true"^^xsd:boolean ]
     ], [
       fhir:index 1;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl" ];
       fhir:Extension.valueCodeableConcept [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://hl7.org/fhir/questionnaire-item-control" ];
           fhir:Coding.code [ fhir:value "drop-down" ];
           fhir:Coding.display [ fhir:value "Drop down" ]
         ];
         fhir:CodeableConcept.text [ fhir:value "Drop down" ]
       ]
     ], [
       fhir:index 2;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
       fhir:Extension.valueExpression [
         fhir:Expression.name [ fhir:value "thisItem" ];
         fhir:Expression.language [ fhir:value "text/fhirpath" ];
         fhir:Expression.expression [ fhir:value "%questionnaire.item.where(linkId = '/88124-3')" ]
       ]
     ], [
       fhir:index 3;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
       fhir:Extension.valueExpression [
         fhir:Expression.name [ fhir:value "atRiskCoding" ];
         fhir:Expression.language [ fhir:value "text/fhirpath" ];
         fhir:Expression.expression [ fhir:value "%thisItem.answerOption.valueCoding.where(code='LA19952-3')" ]
       ]
     ], [
       fhir:index 4;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/variable" ];
       fhir:Extension.valueExpression [
         fhir:Expression.name [ fhir:value "noRiskCoding" ];
         fhir:Expression.language [ fhir:value "text/fhirpath" ];
         fhir:Expression.expression [ fhir:value "%thisItem.answerOption.valueCoding.where(code='LA19983-8')" ]
       ]
     ], [
       fhir:index 5;
       fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/questionnaire-calculatedExpression" ];
       fhir:Extension.valueExpression [
         fhir:Expression.description [ fhir:value "risk determination" ];
         fhir:Expression.language [ fhir:value "text/fhirpath" ];
         fhir:Expression.expression [ fhir:value "iif(%answeredEitherQ, iif(%riskStatus, %atRiskCoding, %noRiskCoding), {})" ]
       ]
     ];
     fhir:Questionnaire.item.linkId [ fhir:value "/88124-3" ];
     fhir:Questionnaire.item.code [
       fhir:index 0;
       fhir:Coding.code [ fhir:value "88124-3" ];
       fhir:Coding.display [ fhir:value "Food insecurity risk" ]
     ];
     fhir:Questionnaire.item.text [ fhir:value "Food insecurity risk" ];
     fhir:Questionnaire.item.type [ fhir:value "choice" ];
     fhir:Questionnaire.item.required [ fhir:value "false"^^xsd:boolean ];
     fhir:Questionnaire.item.readOnly [ fhir:value "true"^^xsd:boolean ];
     fhir:Questionnaire.item.answerOption [
       fhir:index 0;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA19952-3" ];
         fhir:Coding.display [ fhir:value "At risk" ]
       ]
     ], [
       fhir:index 1;
       fhir:Questionnaire.item.answerOption.valueCoding [
         fhir:Coding.code [ fhir:value "LA19983-8" ];
         fhir:Coding.display [ fhir:value "No risk" ]
       ]
     ];
     fhir:Questionnaire.item.item [
       fhir:index 0;
       fhir:Element.extension [
         fhir:index 0;
         fhir:Extension.url [ fhir:value "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl" ];
         fhir:Extension.valueCodeableConcept [
           fhir:CodeableConcept.coding [
             fhir:index 0;
             fhir:Coding.system [ fhir:value "http://hl7.org/fhir/questionnaire-item-control" ];
             fhir:Coding.code [ fhir:value "help" ];
             fhir:Coding.display [ fhir:value "Help-Button" ]
           ];
           fhir:CodeableConcept.text [ fhir:value "Help-Button" ]
         ]
       ];
       fhir:Questionnaire.item.linkId [ fhir:value "/88124-3-help" ];
       fhir:Questionnaire.item.text [ fhir:value "An answer of \"often true\" or \"sometimes true\" to either or both of the Hunger Vital Signâ„¢ questions identifies a patient as at risk for food insecurity (FI)." ];
       fhir:Questionnaire.item.type [ fhir:value "display" ]
     ]
  ] .

# - ontology header ------------------------------------------------------------

<http://hl7.maxmd.org/fhir/us/maxmd/Questionnaire/17d3c570-28de-4aa3-a135-e35d0932a4ec.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

