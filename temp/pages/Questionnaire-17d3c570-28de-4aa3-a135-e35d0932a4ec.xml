<?xml version="1.0" encoding="UTF-8"?>

<Questionnaire xmlns="http://hl7.org/fhir">
  <id value="17d3c570-28de-4aa3-a135-e35d0932a4ec"/>
  <meta>
    <versionId value="1"/>
    <lastUpdated value="2020-03-17T13:16:18.108+00:00"/>
    <source value="#xd09g68tcUyhlqGZ"/>
    <profile value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire|2.7"/>
  </meta>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><p><b>Generated Narrative with Details</b></p><p><b>id</b>: 17d3c570-28de-4aa3-a135-e35d0932a4ec</p><p><b>meta</b>: </p><p><b>url</b>: <b>http://hl7.maxmd.org/fhir/us/maxmd/Questionnaire/17d3c570-28de-4aa3-a135-e35d0932a4ec</b></p><p><b>identifier</b>: local-ehr-65d310b8-6235-4f47-8d45</p><p><b>version</b>: 0.0.3</p><p><b>name</b>: Food Insecurity (Hunger Vital Sign)</p><p><b>title</b>: Food Insecurity</p><p><b>status</b>: ACTIVE</p><p><b>subjectType</b>: Patient</p><p><b>date</b>: Dec 3, 2019 4:09:54 PM</p><p><b>effectivePeriod</b>: Dec 12, 2019 4:52:01 PM --&gt; Dec 22, 2019 11:49:14 PM</p><blockquote><p><b>item</b></p><p><b>linkId</b>: /88122-7</p><p><b>code</b>: Within the past 12Mo we worried whether our food would run out before we got money to buy more (Details: [not stated] code 88122-7 = '88122-7', stated as 'Within the past 12Mo we worried whether our food would run out before we got money to buy more')</p><p><b>text</b>: Within the past 12Mo we worried whether our food would run out before we got money to buy more</p><p><b>type</b>: CHOICE</p><p><b>required</b>: false</p><blockquote><p><b>answerOption</b></p><p><b>value</b>: Often true (Details: [not stated] code LA28397-0 = 'LA28397-0', stated as 'Often true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Sometimes true (Details: [not stated] code LA6729-3 = 'LA6729-3', stated as 'Sometimes true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Never true (Details: [not stated] code LA28398-8 = 'LA28398-8', stated as 'Never true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Don't know/refused (Details: [not stated] code LA15775-2 = 'LA15775-2', stated as 'Don't know/refused')</p></blockquote></blockquote><blockquote><p><b>item</b></p><p><b>linkId</b>: /88123-5</p><p><b>code</b>: Within the past 12Mo the food we bought just didn't last and we didn't have money to get more (Details: [not stated] code 88123-5 = '88123-5', stated as 'Within the past 12Mo the food we bought just didn't last and we didn't have money to get more')</p><p><b>text</b>: Within the past 12Mo the food we bought just didn't last and we didn't have money to get more</p><p><b>type</b>: CHOICE</p><p><b>required</b>: false</p><blockquote><p><b>answerOption</b></p><p><b>value</b>: Often true (Details: [not stated] code LA28397-0 = 'LA28397-0', stated as 'Often true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Sometimes true (Details: [not stated] code LA6729-3 = 'LA6729-3', stated as 'Sometimes true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Never true (Details: [not stated] code LA28398-8 = 'LA28398-8', stated as 'Never true')</p></blockquote><blockquote><p><b>answerOption</b></p><p><b>value</b>: Don't know/refused (Details: [not stated] code LA15775-2 = 'LA15775-2', stated as 'Don't know/refused')</p></blockquote></blockquote><blockquote><p><b>item</b></p></blockquote><p><b style="color: maroon">Exception generating Narrative: unknown extension http://hl7.org/fhir/StructureDefinition/questionnaire-observationLinkPeriod</b></p></div>
  </text>
  <extension url="http://hl7.org/fhir/us/sdc/StructureDefinition/sdc-questionnaire-endpoint">
    <valueString value="https://ehr-sandbox.directmdemail.com:8443/fhir/baseR4"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="worriedAnsCode"/>
      <language value="text/fhirpath"/>
      <expression value="%resource.item.where(linkId=&#39;/88122-7&#39;).answer.value.code"/>
    </valueExpression>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="ranOutAnsCode"/>
      <language value="text/fhirpath"/>
      <expression value="%resource.item.where(linkId=&#39;/88123-5&#39;).answer.value.code"/>
    </valueExpression>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="riskCodes"/>
      <language value="text/fhirpath"/>
      <expression value="&#39;LA28397-0&#39;.combine(&#39;LA6729-3&#39;)"/>
    </valueExpression>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="riskStatus"/>
      <language value="text/fhirpath"/>
      <expression value="%riskCodes contains %worriedAnsCode or %riskCodes contains %ranOutAnsCode"/>
    </valueExpression>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="answeredEitherQ"/>
      <language value="text/fhirpath"/>
      <expression value="%worriedAnsCode.exists() or %ranOutAnsCode.exists()"/>
    </valueExpression>
  </extension>
  <url value="http://hl7.maxmd.org/fhir/us/maxmd/Questionnaire/17d3c570-28de-4aa3-a135-e35d0932a4ec"/>
  <identifier>
    <system value="http://www.maxmddirect.com/hl7/fhir/grv-locali-screenings"/>
    <value value="local-ehr-65d310b8-6235-4f47-8d45"/>
  </identifier>
  <version value="0.0.3"/>
  <name value="Food Insecurity (Hunger Vital Sign)"/>
  <title value="Food Insecurity"/>
  <status value="active"/>
  <subjectType value="Patient"/>
  <date value="2019-12-03T16:09:54+00:00"/>
  <effectivePeriod>
    <start value="2019-12-12T16:52:01+00:00"/>
    <end value="2019-12-22T23:49:14+00:00"/>
  </effectivePeriod>
  <item>
    <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl">
      <valueCodeableConcept>
        <coding>
          <system value="http://hl7.org/fhir/questionnaire-item-control"/>
          <code value="drop-down"/>
          <display value="Drop down"/>
        </coding>
        <text value="Drop down"/>
      </valueCodeableConcept>
    </extension>
    <linkId value="/88122-7"/>
    <code>
      <code value="88122-7"/>
      <display value="Within the past 12Mo we worried whether our food would run out before we got money to buy more"/>
    </code>
    <text value="Within the past 12Mo we worried whether our food would run out before we got money to buy more"/>
    <type value="choice"/>
    <required value="false"/>
    <answerOption>
      <valueCoding>
        <code value="LA28397-0"/>
        <display value="Often true"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA6729-3"/>
        <display value="Sometimes true"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA28398-8"/>
        <display value="Never true"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA15775-2"/>
        <display value="Don&#39;t know/refused"/>
      </valueCoding>
    </answerOption>
  </item>
  <item>
    <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl">
      <valueCodeableConcept>
        <coding>
          <system value="http://hl7.org/fhir/questionnaire-item-control"/>
          <code value="drop-down"/>
          <display value="Drop down"/>
        </coding>
        <text value="Drop down"/>
      </valueCodeableConcept>
    </extension>
    <linkId value="/88123-5"/>
    <code>
      <code value="88123-5"/>
      <display value="Within the past 12Mo the food we bought just didn&#39;t last and we didn&#39;t have money to get more"/>
    </code>
    <text value="Within the past 12Mo the food we bought just didn&#39;t last and we didn&#39;t have money to get more"/>
    <type value="choice"/>
    <required value="false"/>
    <answerOption>
      <valueCoding>
        <code value="LA28397-0"/>
        <display value="Often true"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA6729-3"/>
        <display value="Sometimes true"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA28398-8"/>
        <display value="Never true"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA15775-2"/>
        <display value="Don&#39;t know/refused"/>
      </valueCoding>
    </answerOption>
  </item>
  <item>
    <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-observationLinkPeriod">
      <valueBoolean value="true"/>
    </extension>
    <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl">
      <valueCodeableConcept>
        <coding>
          <system value="http://hl7.org/fhir/questionnaire-item-control"/>
          <code value="drop-down"/>
          <display value="Drop down"/>
        </coding>
        <text value="Drop down"/>
      </valueCodeableConcept>
    </extension>
    <extension url="http://hl7.org/fhir/StructureDefinition/variable">
      <valueExpression>
        <name value="thisItem"/>
        <language value="text/fhirpath"/>
        <expression value="%questionnaire.item.where(linkId = &#39;/88124-3&#39;)"/>
      </valueExpression>
    </extension>
    <extension url="http://hl7.org/fhir/StructureDefinition/variable">
      <valueExpression>
        <name value="atRiskCoding"/>
        <language value="text/fhirpath"/>
        <expression value="%thisItem.answerOption.valueCoding.where(code=&#39;LA19952-3&#39;)"/>
      </valueExpression>
    </extension>
    <extension url="http://hl7.org/fhir/StructureDefinition/variable">
      <valueExpression>
        <name value="noRiskCoding"/>
        <language value="text/fhirpath"/>
        <expression value="%thisItem.answerOption.valueCoding.where(code=&#39;LA19983-8&#39;)"/>
      </valueExpression>
    </extension>
    <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-calculatedExpression">
      <valueExpression>
        <description value="risk determination"/>
        <language value="text/fhirpath"/>
        <expression value="iif(%answeredEitherQ, iif(%riskStatus, %atRiskCoding, %noRiskCoding), {})"/>
      </valueExpression>
    </extension>
    <linkId value="/88124-3"/>
    <code>
      <code value="88124-3"/>
      <display value="Food insecurity risk"/>
    </code>
    <text value="Food insecurity risk"/>
    <type value="choice"/>
    <required value="false"/>
    <readOnly value="true"/>
    <answerOption>
      <valueCoding>
        <code value="LA19952-3"/>
        <display value="At risk"/>
      </valueCoding>
    </answerOption>
    <answerOption>
      <valueCoding>
        <code value="LA19983-8"/>
        <display value="No risk"/>
      </valueCoding>
    </answerOption>
    <item>
      <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl">
        <valueCodeableConcept>
          <coding>
            <system value="http://hl7.org/fhir/questionnaire-item-control"/>
            <code value="help"/>
            <display value="Help-Button"/>
          </coding>
          <text value="Help-Button"/>
        </valueCodeableConcept>
      </extension>
      <linkId value="/88124-3-help"/>
      <text value="An answer of &quot;often true&quot; or &quot;sometimes true&quot; to either or both of the Hunger Vital Sign&#x2122; questions identifies a patient as at risk for food insecurity (FI)."/>
      <type value="display"/>
    </item>
  </item>
</Questionnaire>